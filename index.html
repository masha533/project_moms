<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<title>–° –î–Ω—ë–º –º–∞—Ç–µ—Ä–∏!</title>

<!-- p5.js -->
<script src="https://cdn.jsdelivr.net/npm/p5@1.9.2/lib/p5.min.js"></script>

<!-- –®—Ä–∏—Ñ—Ç -->
<link href="https://fonts.googleapis.com/css2?family=Yeseva+One&display=swap" rel="stylesheet">

<style>
  body{
    margin:0;display:flex;justify-content:center;align-items:center;
    height:100vh;background:#fff5f8;overflow:hidden;
  }
  canvas{
    border-radius:24px;box-shadow:0 8px 32px rgba(0,0,0,.2);
  }
  /* –∫–Ω–æ–ø–∫–∞ ‚Äî —Ü–µ–Ω—Ç—Ä –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏, –≤–Ω–∏–∑—É */
  #surprise{
    position:absolute;left:50%;bottom:18px;transform:translateX(-50%);
    padding:10px 22px;border:none;border-radius:24px;
    background:#ff5fa2;color:#fff;font-size:20px;
    font-family:'Yeseva One',cursive;cursor:pointer;
    box-shadow:0 4px 10px rgba(0,0,0,.15);
    transition:transform .15s;
  }
  #surprise:hover{transform:translateX(-50%) scale(1.06);}
</style>
</head>

<body>
<button id="surprise">–ù–∞–∂–º–∏ üíù</button>

<script>
/* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
let t = 0;
let momImg;

const minis   = [];   // –≥–∏—Ä–ª—è–Ω–¥–∞ –º–∞–ª–µ–Ω—å–∫–∏—Ö —Å–µ—Ä–¥–µ—á–µ–∫
let bursts    = [];   // —Ñ–µ–π–µ—Ä–≤–µ—Ä–∫–∏ –ø–æ—Å–ª–µ –∫–ª–∏–∫–∞
let fallText  = [];   // –ø–∞–¥–∞—é—â–∏–µ —Å—Ç—Ä–æ–∫–∏ ¬´–Ø –ª—é–±–ª—é —Ç–µ–±—è¬ª

/* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ preload ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
function preload(){ momImg = loadImage('mom.JPG'); }

/* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ setup ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
function setup(){
  createCanvas(600,600);
  textAlign(CENTER,CENTER);
  colorMode(HSB,360,100,100,100);

  /* –≤–µ—Ä—Ö–Ω–∏–µ –º–∞–ª–µ–Ω—å–∫–∏–µ —Å–µ—Ä–¥–µ—á–∫–∏ */
  for(let i=0;i<25;i++){
    minis.push({x:random(60,width-60),y:random(40,180),
                base:random(9,14),phase:random(TWO_PI),
                speed:random(1.5,2.5)});
  }

  /* –∫–Ω–æ–ø–∫–∞-—Å—é—Ä–ø—Ä–∏–∑ */
  document.getElementById('surprise').onclick = triggerFirework;
}

/* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ path —Å–µ—Ä–¥—Ü–∞ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
function heartPath(ctx,s){
  ctx.beginPath();
  for(let a=0;a<TWO_PI;a+=0.03){
    const x = 16*pow(sin(a),3)*s;
    const y = -(13*cos(a)-5*cos(2*a)-2*cos(3*a)-cos(4*a))*s;
    ctx.lineTo(x,y);
  }
  ctx.closePath();
}

/* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ –≥–∏—Ä–ª—è–Ω–¥–∞ –º–∞–ª–µ–Ω—å–∫–∏—Ö —Å–µ—Ä–¥–µ—á–µ–∫ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
function drawMiniHearts(){
  const ctx=drawingContext;
  minis.forEach(h=>{
    const sz = h.base*(1+0.24*sin(t*h.speed+h.phase));
    fill((t*80+h.phase*180/PI)%360,70,100);
    noStroke();
    ctx.save();ctx.translate(h.x,h.y);heartPath(ctx,sz/16);ctx.fill();ctx.restore();
  });
}

/* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ –ø–∞–¥–∞—é—â–∏–µ –Ω–∞–¥–ø–∏—Å–∏ ¬´–Ø –ª—é–±–ª—é —Ç–µ–±—è¬ª ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
function spawnLove(){
  fallText.push({
    x: random(80,width-80),
    y: -20,
    vy: random(0.6,1.2),
    alpha: 100
  });
}

function updateLove(){
  textFont('Yeseva One'); textSize(22);
  for(let i=fallText.length-1;i>=0;i--){
    const f = fallText[i];
    f.y += f.vy;
    f.alpha -= 0.3;
    if(f.alpha<=0){ fallText.splice(i,1); continue; }
    fill(340,60,100,f.alpha);
    text('–Ø –ª—é–±–ª—é —Ç–µ–±—è', f.x, f.y);
  }
  /* –∫–∞–∂–¥—ã–µ ~120 –∫–∞–¥—Ä–æ–≤ (‚âà2 —Å–µ–∫) —Å–æ–∑–¥–∞—ë–º –Ω–æ–≤—É—é —Å—Ç—Ä–æ–∫—É */
  if(frameCount%120===0) spawnLove();
}

/* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ —Ñ–µ–π–µ—Ä–≤–µ—Ä–∫ —Å–µ—Ä–¥–µ—á–µ–∫ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
function triggerFirework(){
  const p=[];const n=60;
  for(let i=0;i<n;i++){
    const a=random(TWO_PI);
    p.push({x:width/2,y:height/2-80,
            vx:cos(a)*random(1.5,4),
            vy:sin(a)*random(1.5,4),
            life:1});
  }
  bursts.push(p);
}

function updateBursts(){
  const ctx=drawingContext;
  bursts.forEach(ps=>{
    ps.forEach(p=>{
      p.x+=p.vx; p.y+=p.vy; p.vy+=0.03; p.life-=0.015;
      if(p.life>0){
        ctx.save();ctx.translate(p.x,p.y);
        fill((t*90+p.x)%360,80,100,p.life*100);
        noStroke();heartPath(ctx,6/16);ctx.fill();ctx.restore();
      }
    });
  });
  bursts=bursts.filter(b=>b.some(p=>p.life>0));
}

/* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ –æ—Å–Ω–æ–≤–Ω–æ–π draw ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
function draw(){
  background('#fff5f8');
  drawMiniHearts();      // –≥–∏—Ä–ª—è–Ω–¥–∞
  updateLove();          // –ø–∞–¥–∞—é—â–∏–µ –Ω–∞–¥–ø–∏—Å–∏

  const ctx=drawingContext;
  const pulse=1+0.05*sin(t*3), size=9.5*pulse;

  /* —Ä–æ–∑–æ–≤–æ–µ —Å–≤–µ—á–µ–Ω–∏–µ */
  push();translate(width/2,height/2-80);
  for(let i=8;i>0;i--){
    fill(340,60,100,map(i,1,8,5,25));
    noStroke();ctx.save();heartPath(ctx,size+i*0.2);ctx.fill();ctx.restore();
  }pop();

  /* —Ñ–æ—Ç–æ-—Å–µ—Ä–¥—Ü–µ */
  push();translate(width/2,height/2-80);
  ctx.save();heartPath(ctx,size);ctx.clip();
  imageMode(CENTER);image(momImg,0,0,size*32,size*32);ctx.restore();pop();

  /* —Ä–∞–¥—É–∂–Ω–∞—è –æ–∫–∞–Ω—Ç–æ–≤–∫–∞ */
  push();translate(width/2,height/2-80);
  stroke((t*80)%360,80,100);strokeWeight(4);noFill();
  beginShape();heartPath(ctx,size);endShape();pop();

  /* –ø–æ–¥–ø–∏—Å—å */
  fill('#d81b60');noStroke();
  textFont('Yeseva One');textSize(26);
  text('–° –î–Ω—ë–º –º–∞—Ç–µ—Ä–∏,\n–º–∞–º–æ—á–∫–∞!\n–Ø —Ç–µ–±—è –ª—é–±–ª—é üíñ\n–≠—Ç–æ —Å–µ—Ä–¥–µ—á–∫–æ –¥–ª—è —Ç–µ–±—è –æ—Ç –ú—É—Å–∏',
       width/2,height/2+160);

  updateBursts();  // —Ñ–µ–π–µ—Ä–≤–µ—Ä–∫–∏

  t += 0.02;
}
</script>
</body>
</html>
